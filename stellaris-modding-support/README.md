# 概述

Stellaris Mod 支持。

目前仍在烧脑更新中……

# 功能

## 说明

* 勾上的任务列表项：这个功能的代码部分已经基本完成，但可能无法通过测试。
* 行尾带有`✔`的任务列表项：这个功能已经通过测试，但可能没有完全实现，因为可能依赖其他功能的实现。
* 行尾带有`❓`的任务列表项：这个功能未通过测试，出于个人能力、时间和精力的限制，目前尚未完成……
* 带有下划线（由`++`包围）的任务列表项：这个功能可能不是特别必要或非常复杂，短期内不会考虑实现。

## Stellaris Script Language

* [X] 语言和文件类型 ✔
* [X] 语法和词法解析
  * [X] 基本解析 ✔
  * [X] 更加严格的解析（限制空白类型） ✔
  * [X] 跳过错误继续解析（列表中） ✔
* [X] 语法高亮
  * [X] 基本高亮 ✔
  * [X] 转义字符 ✔
* [X] 代码折叠
  * [X] 列表 -> `{...}` ✔
  * [X] 单行注释 -> `#...` ✔
  * [ ] ~~变量组 -> `@...`~~
* [X] 括号适配器
  * [X] `{}` ✔ 
* [X] 颜色风格设置 ✔
* [X] 注释器 ✔
* [X] 拼写检查器 ✔
* [X] 代码补全
  * [X] 关键字 `yes`/`no` ✔
  * [ ] 关键字属性（`if` `else_if`等）
* [X] 动态模版
  * [X] 来自本地化文件的动态模版  ✔
* [X] 面包屑导航 ✔
* [X] 结构视图 ✔
* [X] 引用
  * [X] 变量引用 ❓
  * [X] 属性引用 ❓
* [X] 代码重构（基于引用）
  * [X] 重命名变量 ✔
  * [X] 重命名变量的合法性检查 ✔
  * [X] 安全删除变量 ✔
  * [ ] 内联变量
* [X] 代码格式设置 ✔
* [X] 格式化 ✔
* [X] 提供文档注释 ✔
  * [X] 变量 ✔
  * [ ] 顶级属性
* [X] 提供描述（查找使用时要用到） ✔
* [X] 定位定义
  * [X] 变量 -> 同一文件中的变量定义
  * [X] 变量 -> 项目文件中的变量定义
  * [X] 字符串 -> 可能的脚本文件的属性
  * [X] 字符串 -> 可能的本地化文件的属性
  * [ ] ++变量 -> Stellaris游戏目录中的变量定义++
  * [ ] ++变量 -> Stellaris模组目录中的变量定义++
* [X] 定位使用
  * [X] 变量 -> 属性值
  * [ ] ++引用(事件、种族名等) -> 被引用处++
* [ ] 注解器
  * [ ] 来自本地化文件的注解器
  * [ ] ++文件路径++
* [X] 代码检查
  * [X] ［错误］重复的变量定义 → 导航到重复的变量定义 ✔
  * [X] ［警告］非法的文件编码 → 转化为正确的文件编码（除了name_list是`UTF-8 BOM`之外，必须是`UTF-8 NO BOM`） ✔
  * [ ] ++［警告］文件名以`00_`开头 → 重命名文件（可能会覆盖原版文件）++
  * [ ] ++［警告］非法的文件目录 → ~~移动目录~~（除了.mod文件之外，必须在限定的目录下）++

## Stellaris Localization Language

* [X] 语言和文件类型 ✔
* [X] 语法和词法解析
  * [X] 基本解析 ✔
  * [X] 更加严格的解析（限制空白类型） ✔
  * [ ] 文本的内联元素（属性引用等）
* [X] 语法高亮
  * [X] 基本高亮 ✔
  * [X] 转义字符 ✔
  * [ ] 属性引用
  * [ ] 内联代码
  * [ ] 内联图标
  * [ ] 编号
  * [ ] 颜色文本
* [X] 代码折叠
  * [X] 单行注释 -> `#...` ✔
  * [ ] ++名字为同一前缀的属性 -> `Xxx_...`++
* [X] 颜色风格设置 ✔
* [X] 注释器 ✔
* [X] 拼写检查器 ✔
* [X] 代码补全
  * [X] 基本 `l_` -> `l_xxx` ✔
* [X] 动态模版
  * [X] 属性引用 ✔
  * [X] 内联代码 ✔
  * [X] 内联图标 ✔
  * [X] 编号 ✔
  * [X] 颜色文本 ✔
* [X] 面包屑导航 ✔
* [X] 结构视图 ✔
* [X] 引用
  * [X] 属性头部引用 ❓
  * [X] 属性引用 ❓
* [X] 代码重构（基于引用）
  * [X] 重命名属性 ✔
  * [X] 重命名属性的合法性检查 ✔
  * [X] 安全删除属性 ✔
* [X] 代码格式设置
* [X] 格式化
* [X] 提供文档注释 ✔
  * [X] 属性 ✔
  * [ ] 语言区域（描述）
  * [ ] ++属性（预览渲染出的本地化文本，包括彩色、图标、属性引用等）++
* [X] 提供描述（查找使用时要用到） ✔
* [X] 定位定义
  * [X] 属性 -> 同一文件中的属性定义
  * [X] 属性 -> 项目文件中的属性定义
  * [ ] ++属性 -> Stellaris 游戏目录++
  * [ ] ++属性 -> Stellaris Mod目录++
* [ ] 定位使用
  * [ ] 属性 -> 属性值中
  * [ ] 属性 -> 脚本文件的属性值 
* [ ] 注解器
  * [ ] 属性引用
  * [ ] 颜色文本
  * [ ] 内联代码
  * [ ] 内联图标
* [X] 代码检查
  * [X] ［错误］重复的属性 → 导航到重复的属性 ✔
  * [X] ［错误］不支持的语言区域 → 选择语言区域（语法上允许其他语言区域） ✔
  * [X] ［警告］非法的文件编码 → 转化为正确的文件编码（必须是`UTF-8 BOM`） ✔
  * [X] ［警告］非法的文件名 → ~~重命名文件名~~（必须包含语言区域字符串如`l_simp_chinese`） ✔
  * [ ] ++［警告］非法的文件目录 → ~~移动目录~~（必须是`localization`或`localization_synced`）++

# BUG和问题

## 暂时无法避免的BUG和问题

* 通过快速修正更改了文件编码和BOM之后，必须真正编辑文件内容才会进行下一次检查，让上方的警告消失
* ~~不能通过快速修正直接替换Psi~~（使用`WriteCommandAction`）
